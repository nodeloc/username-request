{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/username-request/webpack/bootstrap","webpack://@fof/username-request/webpack/runtime/compat get default export","webpack://@fof/username-request/webpack/runtime/define property getters","webpack://@fof/username-request/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/username-request/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/models/User']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/username-request/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/username-request/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@fof/username-request/./src/forum/models/UsernameRequest.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/username-request/./src/forum/components/RequestModal.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@fof/username-request/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/username-request/./src/forum/components/ActionModal.js","webpack://@fof/username-request/./src/forum/components/RequestsList.js","webpack://@fof/username-request/./src/forum/components/RequestsPage.js","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/HeaderSecondary']\"","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://@fof/username-request/./src/forum/components/RequestsDropdown.js","webpack://@fof/username-request/./src/forum/components/ResultsModal.js","webpack://@fof/username-request/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@fof/username-request/./src/forum/components/ProfilePage.js","webpack://@fof/username-request/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/username-request/./src/forum/states/RequestsListState.js","webpack://@fof/username-request/./src/forum/index.js","webpack://@fof/username-request/./src/forum/addRequestSetting.js","webpack://@fof/username-request/./src/forum/addRequestDropdown.js","webpack://@fof/username-request/./src/forum/checkForApproval.js","webpack://@fof/username-request/./src/forum/addProfilePage.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\r\nimport computed from 'flarum/common/utils/computed';\r\nimport mixin from 'flarum/common/utils/mixin';\r\n\r\nexport default class UsernameRequest extends mixin(Model, {\r\n  user: Model.hasOne('user'),\r\n  status: Model.attribute('status'),\r\n  reason: Model.attribute('reason'),\r\n  createdAt: Model.attribute('createdAt', Model.transformDate),\r\n  forNickname: Model.attribute('forNickname'),\r\n\r\n  _requestedUsername: Model.attribute('requestedUsername'),\r\n  requestedUsername: computed('_requestedUsername', 'forNickname', 'user', (newName, forNickname, user) => {\r\n    return newName === null && forNickname ? user.username() : newName;\r\n  }),\r\n}) {}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","import app from 'flarum/forum/app';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\nexport default class RequestModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.username = Stream(this.attrs.nickname ? app.session.user.displayName() : app.session.user.username());\r\n\r\n    this.userRequestAttr = `last${this.attrs.nickname ? 'Nickname' : 'Username'}Request`;\r\n\r\n    this.lastRequest = app.session.user[this.userRequestAttr]();\r\n\r\n    if (this.lastRequest) this.username(this.lastRequest.requestedUsername());\r\n\r\n    this.success = false;\r\n\r\n    this.password = Stream('');\r\n\r\n    this.translationPrefix = `fof-username-request.forum.${this.attrs.nickname ? 'nickname' : 'username'}_modals.request`;\r\n\r\n    this.cost = this.attrs.nickname ? app.forum.attribute('nickname_cost'):app.forum.attribute('username_cost');\r\n\r\n\r\n  }\r\n\r\n  className() {\r\n    return 'RequestUsernameModal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(`${this.translationPrefix}.title`);\r\n  }\r\n\r\n  content() {\r\n    if (this.success) {\r\n      return (\r\n        <div className=\"Modal-body\">\r\n          <div className=\"Form Form--centered\">\r\n            <p className=\"helpText\">{app.translator.trans(`${this.translationPrefix}.confirmation_message`)}</p>\r\n            <div className=\"Form-group\">\r\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\r\n                {app.translator.trans(`${this.translationPrefix}.dismiss_button`)}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form Form--centered\">\r\n          {this.lastRequest ? (\r\n            <p className=\"helpText\">\r\n              {app.translator.trans(`${this.translationPrefix}.current_request`, {\r\n                name: this.lastRequest.requestedUsername(),\r\n              })}\r\n            </p>\r\n          ) : (\r\n            ''\r\n          )}\r\n          <div className=\"Form-group\">\r\n            <lable>{app.translator.trans(`${this.translationPrefix}.cost`,{cost:this.cost})}</lable>\r\n            <input\r\n              type=\"text\"\r\n              name=\"text\"\r\n              className=\"FormControl\"\r\n              placeholder={app.session.user.username()}\r\n              bidi={this.username}\r\n              disabled={this.deleteLoading || this.submitLoading}\r\n            />\r\n          </div>\r\n          {app.forum.attribute('passwordlessSignUp') ? null : (\r\n            <div className=\"Form-group\">\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                className=\"FormControl\"\r\n                placeholder={app.translator.trans('core.forum.change_email.confirm_password_placeholder')}\r\n                bidi={this.password}\r\n                disabled={this.deleteLoading || this.submitLoading}\r\n              />\r\n            </div>\r\n          )}\r\n          <div className=\"Form-group\">\r\n            {Button.component(\r\n              {\r\n                className: 'Button Button--primary Button--block',\r\n                type: 'submit',\r\n                loading: this.submitLoading,\r\n              },\r\n              app.translator.trans(`${this.translationPrefix}.submit_button`)\r\n            )}\r\n          </div>\r\n          {this.lastRequest ? (\r\n            <div className=\"Form-group\">\r\n              {Button.component(\r\n                {\r\n                  className: 'Button Button--primary Button--block',\r\n                  onclick: this.deleteRequest.bind(this),\r\n                  loading: this.deleteLoading,\r\n                },\r\n                app.translator.trans(`${this.translationPrefix}.delete_button`)\r\n              )}\r\n            </div>\r\n          ) : (\r\n            ''\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  deleteRequest(e) {\r\n    e.preventDefault();\r\n\r\n    this.deleteLoading = true;\r\n\r\n    this.lastRequest.delete();\r\n\r\n    this.successAlert = app.alerts.show({ type: 'success' }, app.translator.trans(`${this.translationPrefix}.deleted`));\r\n\r\n    app.session.user[this.userRequestAttr] = Stream();\r\n\r\n    this.hide();\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.alert = null;\r\n\r\n    const currentAttr = this.attrs.nickname ? app.session.user.displayName() : app.session.user.username();\r\n    if (this.username() === currentAttr) {\r\n      this.hide();\r\n      return;\r\n    }\r\n\r\n    this.submitLoading = true;\r\n\r\n    app.store\r\n      .createRecord('username-requests')\r\n      .save(\r\n        {\r\n          username: this.username(),\r\n          forNickname: this.attrs.nickname,\r\n        },\r\n        {\r\n          meta: { password: this.password() },\r\n          errorHandler: this.onerror.bind(this),\r\n        }\r\n      )\r\n      .then((request) => {\r\n        app.session.user[this.userRequestAttr] = Stream(request);\r\n        this.success = true;\r\n        this.alertAttrs = null;\r\n      })\r\n      .catch(() => {})\r\n      .then(this.loaded.bind(this));\r\n  }\r\n\r\n  onerror(error) {\r\n    if (error.status === 401) {\r\n      error.alert.content = app.translator.trans('core.forum.change_email.incorrect_password_message');\r\n      this.submitLoading = false;\r\n    }\r\n\r\n    super.onerror(error);\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","import app from 'flarum/forum/app';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport username from 'flarum/common/helpers/username';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport withAttr from 'flarum/common/utils/withAttr';\r\n\r\nexport default class ActionModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.request = this.attrs.request;\r\n\r\n    this.approved = Stream('Rejected');\r\n\r\n    this.reason = Stream('');\r\n\r\n    this.translationPrefix = `fof-username-request.forum.${this.request.forNickname() ? 'nickname' : 'username'}_modals.action`;\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(`${this.translationPrefix}.title`);\r\n  }\r\n\r\n  className() {\r\n    return 'RequestActionModal Modal--medium';\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <h3 className=\"Notification-content\">\r\n            {app.translator.trans(`${this.translationPrefix}.name`, {\r\n              name: username(this.request.user()),\r\n              requestedName: this.request.requestedUsername(),\r\n            })}\r\n          </h3>\r\n          <p className=\"help\">{app.translator.trans(`${this.translationPrefix}.help_text`)}</p>\r\n          <legend>{app.translator.trans(`${this.translationPrefix}.decision_title`)}</legend>\r\n          <div className=\"Form-group\">\r\n            <label className=\"checkbox\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"approved\"\r\n                value=\"Approved\"\r\n                checked={this.approved() === 'Approved'}\r\n                onclick={withAttr('value', this.approved)}\r\n              />\r\n              {app.translator.trans(`${this.translationPrefix}.approval_label`)}\r\n            </label>\r\n            <label className=\"checkbox\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"rejected\"\r\n                value=\"Rejected\"\r\n                checked={this.approved() === 'Rejected'}\r\n                onclick={withAttr('value', this.approved)}\r\n              />\r\n              {app.translator.trans(`${this.translationPrefix}.rejected_label`)}\r\n            </label>\r\n          </div>\r\n          {this.approved() === 'Rejected' ? (\r\n            <div className=\"Form-group\">\r\n              <legend>{app.translator.trans(`${this.translationPrefix}.reason_title`)}</legend>\r\n              <div className=\"BasicsPage-reason-input\">\r\n                <textarea className=\"FormControl\" value={this.reason()} disabled={this.loading} oninput={withAttr('value', this.reason)} />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            ''\r\n          )}\r\n          <div className=\"Form-group\">\r\n            {Button.component(\r\n              {\r\n                className: 'Button Button--primary Button--block',\r\n                type: 'submit',\r\n                loading: this.loading,\r\n                disabled: this.approved() === 'Rejected' && !this.reason() ? true : false,\r\n              },\r\n              app.translator.trans(`${this.translationPrefix}.submit_button`)\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onsubmit(e) {\r\n    e.preventDefault();\r\n\r\n    this.loading = true;\r\n\r\n    this.request\r\n      .save({\r\n        reason: this.reason(),\r\n        action: this.approved(),\r\n      })\r\n      .then(() => {\r\n        this.successAlert = app.alerts.show({ type: 'success' }, app.translator.trans(`${this.translationPrefix}.success`));\r\n      });\r\n\r\n    app.cache.username_requests.some((request, i) => {\r\n      if (request.id() == this.request.id()) {\r\n        app.cache.username_requests.splice(i, 1);\r\n      }\r\n    });\r\n\r\n    m.redraw();\r\n\r\n    this.hide();\r\n  }\r\n}\r\n","import app from 'flarum/forum/app';\r\nimport Component from 'flarum/common/Component';\r\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\r\nimport avatar from 'flarum/common/helpers/avatar';\r\nimport username from 'flarum/common/helpers/username';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport humanTime from 'flarum/common/helpers/humanTime';\r\nimport ActionModal from './ActionModal';\r\n\r\nexport default class FlagList extends Component {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.loading = false;\r\n  }\r\n\r\n  view() {\r\n    const requests = app.cache.username_requests || [];\r\n\r\n    return (\r\n      <div className=\"NotificationList RequestsList\">\r\n        <div className=\"NotificationList-header\">\r\n          <h4 className=\"App-titleControl App-titleControl--text\">{app.translator.trans('fof-username-request.forum.pending_requests.title')}</h4>\r\n        </div>\r\n        <div className=\"NotificationList-content\">\r\n          <ul className=\"NotificationGroup-content\">\r\n            {requests.length ? (\r\n              requests.map((request) => {\r\n                const prefix = request.forNickname() ? 'nickname' : 'username';\r\n                return (\r\n                  <li>\r\n                    <a onclick={this.showModal.bind(this, request)} className=\"Notification Request\">\r\n                      {avatar(request.user())}\r\n                      {icon('fas fa-user-edit', { className: 'Notification-icon' })}\r\n                      <span className=\"Notification-content\">\r\n                        {app.translator.trans(`fof-username-request.forum.pending_requests.${prefix}_item_text`, {\r\n                          name: username(request.user()),\r\n                        })}\r\n                      </span>\r\n                      {humanTime(request.createdAt())}\r\n                      <div className=\"Notification-excerpt\">\r\n                        {app.translator.trans(`fof-username-request.forum.pending_requests.${prefix}_exerpt`, {\r\n                          requestedName: request.requestedUsername(),\r\n                        })}\r\n                      </div>\r\n                    </a>\r\n                  </li>\r\n                );\r\n              })\r\n            ) : !this.loading ? (\r\n              <div className=\"NotificationList-empty\">{app.translator.trans('fof-username-request.forum.pending_requests.empty_text')}</div>\r\n            ) : (\r\n              LoadingIndicator.component({ className: 'LoadingIndicator--block' })\r\n            )}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  showModal(request) {\r\n    app.modal.show(ActionModal, { request });\r\n  }\r\n}\r\n","import app from 'flarum/forum/app';\r\nimport Page from 'flarum/common/components/Page';\r\n\r\nimport RequestsList from './RequestsList';\r\n\r\nexport default class RequestsPage extends Page {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    app.history.push('requests');\r\n\r\n    app.usernameRequests.load();\r\n\r\n    this.bodyClass = 'App--requests';\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <div className=\"RequestsPage\">\r\n        <RequestsList state={app.usernameRequests}></RequestsList>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationsDropdown'];","import app from 'flarum/forum/app';\r\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\r\n\r\nimport RequestsList from './RequestsList';\r\n\r\nexport default class RequestsDropdown extends NotificationsDropdown {\r\n  static initAttrs(attrs) {\r\n    attrs.label = attrs.label || app.translator.trans('fof-username-request.forum.pending_requests.tooltip');\r\n    attrs.icon = attrs.icon || 'fas fa-user-edit';\r\n\r\n    super.initAttrs(attrs);\r\n  }\r\n\r\n  getMenu() {\r\n    return (\r\n      <div className={'Dropdown-menu ' + this.attrs.menuClassName} onclick={this.menuClick.bind(this)}>\r\n        {this.showing ? RequestsList.component({ state: app.usernameRequests }) : ''}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  goToRoute() {\r\n    m.route.set(app.route('username_requests'));\r\n  }\r\n\r\n  getUnreadCount() {\r\n    if (app.cache.username_requests) {\r\n      return app.cache.username_requests.length;\r\n    }\r\n    return app.forum.data.relationships.username_requests.data.length;\r\n  }\r\n\r\n  getNewCount() {\r\n    if (app.cache.username_requests) {\r\n      return app.cache.username_requests.length;\r\n    }\r\n    return app.forum.data.relationships.username_requests.data.length;\r\n  }\r\n}\r\n","import app from 'flarum/forum/app';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\n\r\nexport default class ResultsModal extends Modal {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n\r\n    this.userRequestAttr = `last${this.attrs.nickname ? 'Nickname' : 'Username'}Request`;\r\n\r\n    this.request = app.session.user[this.userRequestAttr]();\r\n\r\n    this.translationPrefix = `fof-username-request.forum.${this.request.forNickname() ? 'nickname' : 'username'}_modals.results`;\r\n  }\r\n\r\n  className() {\r\n    return 'ResultsModal Modal';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans(`${this.translationPrefix}.title`);\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form Form--centered\">\r\n          {this.request.status() === 'Approved'\r\n            ? [\r\n                <h2>{app.translator.trans(`${this.translationPrefix}.approved`)}</h2>,\r\n                <h3>{app.translator.trans(`${this.translationPrefix}.new_name`, { name: app.session.user.displayName() })}</h3>,\r\n              ]\r\n            : [\r\n                <h2>{app.translator.trans(`${this.translationPrefix}.rejected`)}</h2>,\r\n                <h3>{app.translator.trans(`${this.translationPrefix}.reason`, { reason: this.request.reason(), i: <i /> })}</h3>,\r\n                <p className=\"helpText\">{app.translator.trans(`${this.translationPrefix}.resubmit`)}</p>,\r\n              ]}\r\n          <div className=\"Form-group\">\r\n            <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\r\n              {app.translator.trans(`${this.translationPrefix}.dismiss_button`)}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onremove() {\r\n    app.session.user[this.userRequestAttr] = Stream();\r\n    this.request.save({ delete: true });\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","import UserPage from 'flarum/forum/components/UserPage';\r\nimport humanTime from 'flarum/common/helpers/humanTime';\r\n\r\nexport default class ProfileConfigurePane extends UserPage {\r\n  oninit(vnode) {\r\n    super.oninit(vnode);\r\n    this.loading = true;\r\n\r\n    this.loadUser(m.route.param('username'));\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <table className=\"NotificationGrid\">\r\n        {this.user\r\n          .usernameHistory()\r\n          .slice(0)\r\n          .reverse()\r\n          .map((username) => {\r\n            var oldUsername = Object.keys(username)[0];\r\n            return (\r\n              <tr>\r\n                <td>{oldUsername}</td>\r\n                <td>{humanTime(this.calculateTime(username[oldUsername]))}</td>\r\n              </tr>\r\n            );\r\n          })}\r\n      </table>\r\n    );\r\n  }\r\n\r\n  show(user) {\r\n    this.user = user;\r\n\r\n    m.redraw();\r\n  }\r\n\r\n  calculateTime(time) {\r\n    var d = new Date(0);\r\n    return d.setUTCSeconds(time);\r\n  }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import app from 'flarum/forum/app';\r\n\r\nexport default class RequestsListState {\r\n  constructor(app) {\r\n    this.app = app;\r\n\r\n    /**\r\n     * Whether or not the flags are loading.\r\n     *\r\n     * @type {Boolean}\r\n     */\r\n    this.loading = false;\r\n\r\n    this.cache = [];\r\n  }\r\n\r\n  load() {\r\n    if (app.cache.username_requests) {\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    m.redraw();\r\n\r\n    app.store\r\n      .find('username-requests')\r\n      .then((requests) => {\r\n        delete requests.payload;\r\n        app.cache.username_requests = requests.sort((a, b) => a.createdAt() - b.createdAt());\r\n      })\r\n      .catch(() => {})\r\n      .then(() => {\r\n        this.loading = false;\r\n        m.redraw();\r\n      });\r\n  }\r\n}\r\n","import app from 'flarum/forum/app';\r\nimport User from 'flarum/common/models/User';\r\nimport Model from 'flarum/common/Model';\r\nimport UsernameRequest from './models/UsernameRequest';\r\nimport addRequestSetting from './addRequestSetting';\r\nimport RequestsPage from './components/RequestsPage';\r\nimport addRequestDropdown from './addRequestDropdown';\r\nimport checkForApproval from './checkForApproval';\r\nimport ProfilePage from './components/ProfilePage';\r\nimport addProfilePage from './addProfilePage';\r\nimport RequestsListState from './states/RequestsListState';\r\n\r\napp.initializers.add('fof-username-request', () => {\r\n  app.store.models['username-requests'] = UsernameRequest;\r\n  User.prototype.lastNicknameRequest = Model.hasOne('lastNicknameRequest');\r\n  User.prototype.lastUsernameRequest = Model.hasOne('lastUsernameRequest');\r\n  User.prototype.usernameHistory = Model.attribute('usernameHistory');\r\n\r\n  app.routes.username_requests = { path: '/username-requests', component: RequestsPage };\r\n  app.routes.username_history = { path: '/u/:username/history', component: ProfilePage };\r\n\r\n  app.usernameRequests = new RequestsListState(app);\r\n\r\n  addRequestSetting();\r\n  addRequestDropdown();\r\n  checkForApproval();\r\n  addProfilePage();\r\n});\r\n","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport Button from 'flarum/common/components/Button';\r\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\r\nimport RequestModal from './components/RequestModal';\r\n\r\nexport default function () {\r\n  extend(SettingsPage.prototype, 'accountItems', function (items) {\r\n    if (app.forum.attribute('canRequestUsername')) {\r\n      items.add(\r\n        'username-request',\r\n        Button.component(\r\n          {\r\n            className: 'Button',\r\n            onclick: () => {\r\n              app.modal.show(RequestModal);\r\n            },\r\n          },\r\n          app.translator.trans('fof-username-request.forum.settings.username_request_button')\r\n        ),\r\n        8\r\n      );\r\n    }\r\n    if (\r\n      app.forum.attribute('displayNameDriver') === 'nickname' &&\r\n      app.forum.attribute('canRequestNickname') &&\r\n      !this.user.attribute('canEditOwnNickname') &&\r\n      'flarum-nicknames' in flarum.extensions\r\n    ) {\r\n      items.add(\r\n        'nickname-request',\r\n        Button.component(\r\n          {\r\n            className: 'Button',\r\n            onclick: () => {\r\n              app.modal.show(RequestModal, { nickname: true });\r\n            },\r\n          },\r\n          app.translator.trans('fof-username-request.forum.settings.nickname_request_button')\r\n        ),\r\n        8\r\n      );\r\n    }\r\n  });\r\n}\r\n","import { extend } from 'flarum/common/extend';\r\nimport app from 'flarum/forum/app';\r\nimport HeaderSecondary from 'flarum/forum/components/HeaderSecondary';\r\nimport RequestsDropdown from './components/RequestsDropdown';\r\n\r\nexport default function () {\r\n  extend(HeaderSecondary.prototype, 'items', function (items) {\r\n    if (\r\n      (app.forum.data.relationships.username_requests &&\r\n        app.forum.data.relationships.username_requests.data.length &&\r\n        !app.cache.username_requests) ||\r\n      (app.cache.username_requests && app.cache.username_requests.length !== 0)\r\n    ) {\r\n      items.add('UsernameRequests', <RequestsDropdown state={app.usernameRequests} />, 20);\r\n    }\r\n  });\r\n}\r\n","import app from 'flarum/forum/app';\r\nimport ResultsModal from './components/ResultsModal';\r\n\r\nexport default function () {\r\n  return new Promise(() => {\r\n    setTimeout(() => {\r\n      if (app.session.user) {\r\n        const approvedNickname = app.session.user.lastNicknameRequest() && app.session.user.lastNicknameRequest().status() !== 'Sent';\r\n        const approvedUsername = app.session.user.lastUsernameRequest() && app.session.user.lastUsernameRequest().status() !== 'Sent';\r\n        if (approvedNickname || approvedUsername) {\r\n          app.modal.show(ResultsModal, { nickname: approvedNickname });\r\n        }\r\n      }\r\n    }, 1000);\r\n  });\r\n}\r\n","import { extend } from 'flarum/common/extend';\r\nimport app from 'flarum/forum/app';\r\nimport LinkButton from 'flarum/common/components/LinkButton';\r\nimport UserPage from 'flarum/forum/components/UserPage';\r\n\r\nexport default function () {\r\n  extend(UserPage.prototype, 'navItems', function (items) {\r\n    if (this.user.usernameHistory()) {\r\n      items.add(\r\n        'username-requests',\r\n        LinkButton.component(\r\n          {\r\n            href: app.route('username_history', { username: this.user.slug() }),\r\n            icon: 'fas fa-user-edit',\r\n          },\r\n          app.translator.trans('fof-username-request.forum.user.name_history_link')\r\n        )\r\n      );\r\n    }\r\n  });\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","UsernameRequest","_mixin","apply","arguments","mixin","Model","user","status","reason","createdAt","forNickname","_requestedUsername","requestedUsername","computed","newName","username","RequestModal","_Modal","_proto","oninit","vnode","this","Stream","attrs","nickname","app","displayName","userRequestAttr","lastRequest","success","password","translationPrefix","cost","attribute","className","title","trans","content","m","Button","onclick","hide","name","type","placeholder","bidi","disabled","deleteLoading","submitLoading","loading","deleteRequest","preventDefault","successAlert","show","onsubmit","_this","alert","currentAttr","createRecord","save","meta","errorHandler","onerror","then","request","alertAttrs","loaded","error","Modal","ActionModal","approved","requestedName","value","checked","withAttr","oninput","action","username_requests","some","i","id","splice","redraw","FlagList","_Component","view","requests","length","map","prefix","showModal","avatar","icon","humanTime","LoadingIndicator","Component","RequestsPage","_Page","push","load","bodyClass","RequestsList","state","Page","RequestsDropdown","_NotificationsDropdow","initAttrs","label","getMenu","menuClassName","menuClick","showing","component","goToRoute","route","set","getUnreadCount","data","relationships","getNewCount","NotificationsDropdown","ResultsModal","onremove","delete","ProfileConfigurePane","_UserPage","loadUser","param","usernameHistory","slice","reverse","oldUsername","keys","calculateTime","time","Date","setUTCSeconds","UserPage","RequestsListState","cache","find","payload","sort","b","add","models","User","lastNicknameRequest","lastUsernameRequest","path","username_history","ProfilePage","extend","SettingsPage","items","extensions","HeaderSecondary","Promise","setTimeout","approvedNickname","approvedUsername","LinkButton","href","slug"],"sourceRoot":""}